<div>
  <header class="tui-text_h6 tui-text_bold">
    <a tuiLink routerLink="/"> Reunice </a>
  </header>

  <ng-content select="[left]"></ng-content>
</div>

<div>
  <ng-content></ng-content>
</div>

<tui-select
  [formControl]="language"
  [tuiTextfieldLabelOutside]="true"
  tuiTextfieldSize="m"
  [valueContent]="flagContent"
>
  <ng-content></ng-content>
  <tui-data-list-wrapper
    *tuiDataList
    [items]="names"
    [itemContent]="flagContent"
  ></tui-data-list-wrapper>
  <ng-template #flagContent let-name>
    <img
      alt=""
      class="t-flag"
      [src]="flags.get(name) | tuiFlag"
      (click)="translateService.use(name)"
    />
  </ng-template>
  <!-- <tui-data-list *tuiDataList>
    <button
      *ngFor="let name of names"
      tuiOption
      [value]="name"
      (click)="translateService.use(name)"
    >
      <img alt="" class="t-flag" [src]="flags.get(name) | tuiFlag" />
    </button>
  </tui-data-list> -->
</tui-select>

<div class="justify-self-end d-flex align-center">
  <ng-content select="[right]"></ng-content>

  <a
    *reuniceUser="'GUEST'; else loggedMenu"
    tuiIconButton
    routerLink="/auth/login"
    [icon]="'tuiIconUser'"
  ></a>

  <ng-template #loggedMenu let-user="user">
    <tui-hosted-dropdown [content]="profileMenu" #profileMenuDropdown>
      <button
        type="button"
        size="s"
        tuiIconButton
        [pseudoHover]="profileMenuDropdown.open || null"
      >
        <tui-avatar
          text="{{ user.firstName }} {{ user.lastName }}"
        ></tui-avatar>
      </button>
    </tui-hosted-dropdown>
    <ng-template #profileMenu let-close="close">
      <tui-data-list role="menu" size="s">
        <a
          routerLink="/accounts/profile"
          tuiOption
          role="menuitem"
          (click)="close()"
        >
          Profile
        </a>
        <a
          routerLink="/auth/logout"
          tuiOption
          role="menuitem"
          (click)="close()"
        >
          Logout
        </a>
      </tui-data-list>
    </ng-template>
  </ng-template>
</div>
