<div *tuiLet="item$ | async as item">
  <form
    [formGroup]="handler.form"
    [class.form-skeleton]="item === null"
    (ngSubmit)="handler.submit()"
  >
    <h3 class="tui-form__header">
      {{ 'BASIC_INFORMATION' | translate }}
    </h3>

    <div class="tui-form__row tui-form__row_multi-fields">
      <label
        [tuiLabel]="'FIRST_NAME' | translate"
        class="tui-form__multi-field"
      >
        <tui-input
          formControlName="firstName"
          tuiTextfieldSize="m"
          [tuiTextfieldLabelOutside]="true"
        >
          <input tuiTextfield type="text" />
        </tui-input>

        <tui-error
          formControlName="firstName"
          [error]="[] | tuiFieldError | async"
        ></tui-error>
      </label>

      <label [tuiLabel]="'LAST_NAME' | translate" class="tui-form__multi-field">
        <tui-input
          formControlName="lastName"
          tuiTextfieldSize="m"
          [tuiTextfieldLabelOutside]="true"
        >
          <input tuiTextfield type="text" />
        </tui-input>

        <tui-error
          formControlName="lastName"
          [error]="[] | tuiFieldError | async"
        ></tui-error>
      </label>
    </div>

    <div class="tui-form__row tui-form__row_multi-fields">
      <label [tuiLabel]="'EMAIL' | translate" class="tui-form__multi-field">
        <tui-input
          formControlName="email"
          tuiTextfieldSize="m"
          [tuiTextfieldLabelOutside]="true"
        >
          <input tuiTextfield type="email" />
        </tui-input>

        <tui-error
          formControlName="email"
          [error]="[] | tuiFieldError | async"
        ></tui-error>
      </label>

      <label
        [tuiLabel]="'PHONE_NUMBER' | translate"
        class="tui-form__multi-field"
      >
        <tui-input
          formControlName="phoneNumber"
          tuiTextfieldSize="m"
          [tuiTextfieldLabelOutside]="true"
        >
          <input tuiTextfield type="tel" />
        </tui-input>

        <tui-error
          formControlName="phoneNumber"
          [error]="[] | tuiFieldError | async"
        ></tui-error>
      </label>
    </div>

    <label [tuiLabel]="'DESCRIPTION' | translate" class="tui-form__row">
      <tui-text-area
        formControlName="description"
        tuiTextfieldSize="m"
        [tuiTextfieldLabelOutside]="true"
        [maxLength]="255"
        [expandable]="true"
      >
      </tui-text-area>

      <tui-error
        formControlName="description"
        [error]="[] | tuiFieldError | async"
      ></tui-error>
    </label>

    <h3 class="tui-form__header">
      {{ 'USER_STATE' | translate }}
    </h3>

    <div class="tui-form__row tui-form__row_multi-fields">
      <label [tuiLabel]="'STATE' | translate" class="tui-form__multi-field">
        <tui-select
          formControlName="enabled"
          tuiTextfieldSize="m"
          [valueContent]="stateValueContent"
          [tuiTextfieldLabelOutside]="true"
        >
          <tui-data-list *tuiDataList>
            <button tuiOption [value]="true">
              {{ 'ACTIVE' | translate }}
            </button>
            <button tuiOption [value]="false">
              {{ 'DEACTIVATED' | translate }}
            </button>
          </tui-data-list>
        </tui-select>

        <ng-template #stateValueContent let-item>
          {{ (item ? 'ACTIVE' : 'DEACTIVATED') | translate }}
        </ng-template>

        <tui-error
          formControlName="enabled"
          [error]="[] | tuiFieldError | async"
        ></tui-error>
      </label>

      <label [tuiLabel]="'ROLE' | translate" class="tui-form__multi-field">
        <tui-select
          formControlName="accountType"
          tuiTextfieldSize="m"
          [valueContent]="accountTypeValueContent"
          [tuiTextfieldLabelOutside]="true"
        >
          <tui-data-list *tuiDataList>
            <button tuiOption [value]="accountType.ADMIN">
              {{ 'ACCOUNT_TYPE_' + accountType.ADMIN | translate }}
            </button>
            <button tuiOption [value]="accountType.MODERATOR">
              {{ 'ACCOUNT_TYPE_' + accountType.MODERATOR | translate }}
            </button>
            <button tuiOption [value]="accountType.USER">
              {{ 'ACCOUNT_TYPE_' + accountType.USER | translate }}
            </button>
          </tui-data-list>
        </tui-select>

        <ng-template #accountTypeValueContent let-item>
          {{ 'ACCOUNT_TYPE_' + item | translate }}
        </ng-template>

        <tui-error
          formControlName="accountType"
          [error]="[] | tuiFieldError | async"
        ></tui-error>
      </label>
    </div>

    <div class="tui-form__buttons tui-form__buttons_align_end">
      <a
        [routerLink]="['..']"
        tuiButton
        type="button"
        appearance="flat"
        size="m"
        class="tui-form__button"
      >
        {{ 'CANCEL' | translate }}
      </a>
      <button
        tuiButton
        size="m"
        type="submit"
        class="tui-form__button"
        [showLoader]="(handler.loading$ | async) ?? false"
      >
        {{ 'SAVE' | translate }}
      </button>
    </div>
  </form>
</div>
